"use strict";(()=>{var e={};e.id=233,e.ids=[233],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7520:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>g,routeModule:()=>l,serverHooks:()=>w,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>d,dynamic:()=>p});var a=r(9182),i=r(2007),o=r(6719),s=r(3442),u=r(3524);let p="force-dynamic",c=new u.PrismaClient;async function d(e){try{let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page")||"1"),n=parseInt(t.get("limit")||"20"),a=t.get("account"),i="true"===t.get("trending"),o=t.get("sortBy")||"createdAt",u=t.get("order")||"desc",p=(r-1)*n,d={};a&&"all"!==a&&(d.account={username:a}),i&&(d.isTrending=!0);let l={};"engagement"===o?l.engagementScore=u:"trending"===o?l.trendingScore=u:l.createdAt=u;let[g,m]=await Promise.all([c.tweet.findMany({where:d,include:{account:{select:{username:!0,displayName:!0,profileImageUrl:!0}},_count:{select:{rewrites:!0}}},orderBy:l,skip:p,take:n}),c.tweet.count({where:d})]);return s.NextResponse.json({tweets:g,pagination:{page:r,limit:n,total:m,pages:Math.ceil(m/n)}})}catch(e){return console.error("Error fetching tweets:",e),s.NextResponse.json({error:"Failed to fetch tweets"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/tweets/route",pathname:"/api/tweets",filename:"route",bundlePath:"app/api/tweets/route"},resolvedPagePath:"/home/ubuntu/ai_tweet_monitor/app/app/api/tweets/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:w}=l,h="/api/tweets/route";function x(){return(0,o.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[372,609],()=>r(7520));module.exports=n})();